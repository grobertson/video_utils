#!/usr/bin/env python
import logging
import argparse;                                                                # Import library for parsing
from videotagger.mp4Tags import mp4Tags;

if __name__ == "__main__":
	parser = argparse.ArgumentParser(description="Write MP4 Tags");               # Set the description of the script to be printed in the help doc, i.e., ./script -h
	parser.add_argument("file",   type=str, help="Path to file to write tags to."); 
	parser.add_argument("--imdb", type=str, help="IMDb id starting with tt."); 
	parser.add_argument('-v', '--verbose',  nargs='?', default='info', help='Increase verbosity. Levels are info (default) and debug.')
	args = parser.parse_args();                                                   # Parse the arguments

	logger = logging.getLogger();                                                 # Load logger on command line run
	if args.verbose == 'debug':
		logger.setLevel( logging.DEBUG );
	else:
		logger.setLevel( logging.INFO );
		
	screen_fmt = '%(levelname)-5.5s - %(funcName)-10.10s - %(message)s';          # Set format for printing log messages to file
	screen_fmt = logging.Formatter(screen_fmt);                                   # Get logger formatter based on screen format
	screen_lvl = logging.DEBUG;                                                   # Set default screen log level
	screen_log = logging.StreamHandler();                                         # Get a stream handler for screen logs
	screen_log.setFormatter( screen_fmt );                                        # Set the format tot the screen format
	screen_log.setLevel( screen_lvl );                                            # Set the screen logger level
	logger.addHandler(screen_log);                                                # Add the stream handler to the logger

	x = mp4Tags( args.file, IMDbid = args.imdb );
	exit( x );
